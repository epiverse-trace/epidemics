{"version":"1.5.11","config":{"base":"diphtheria","include":null,"custom":null},"meta":{"internal":"internal","user":"user","state":"state","result":"dstatedt","output":"output","time":"t","initial_time":"initial_t"},"features":{"continuous":true,"discrete":false,"mixed":false,"has_array":true,"has_output":false,"has_user":true,"has_delay":false,"has_interpolate":true,"has_stochastic":false,"has_data":false,"has_compare":false,"has_include":false,"has_debug":false,"has_derivative":false,"initial_time_dependent":false},"data":{"elements":[{"name":"beta","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_beta","dim":[],"mult":[]},"stage":"user"},{"name":"beta_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"dim_beta","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_E","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_eta","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_gamma","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_H","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_init_E","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_init_H","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_init_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_init_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_init_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_lambda","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_lambda_prod","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_lambda_prod_1","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_lambda_prod_2","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_pop_change","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_pop_change_1","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_pop_change_2","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_pop_change_t","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_r","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_intervention_effect","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_intervention_effect_1","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_intervention_effect_2","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_intervention_end","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_intervention_start","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_reduction","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_reduction_1","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_reduction_2","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_reduction_sum","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_rate_reduction_total","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_sigma","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_tau1","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_tau2","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_time","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"E","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_E","dim":[],"mult":[]},"stage":"time"},{"name":"eta","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_eta","dim":[],"mult":[]},"stage":"user"},{"name":"eta_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"gamma","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_gamma","dim":[],"mult":[]},"stage":"user"},{"name":"gamma_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"H","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_H","dim":[],"mult":[]},"stage":"time"},{"name":"I","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"time"},{"name":"init_E","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_init_E","dim":[],"mult":[]},"stage":"user"},{"name":"init_H","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_init_H","dim":[],"mult":[]},"stage":"user"},{"name":"init_I","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_init_I","dim":[],"mult":[]},"stage":"user"},{"name":"init_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_init_R","dim":[],"mult":[]},"stage":"user"},{"name":"init_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_init_S","dim":[],"mult":[]},"stage":"user"},{"name":"initial_E","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_E","dim":[],"mult":[]},"stage":"user"},{"name":"initial_H","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_H","dim":[],"mult":[]},"stage":"user"},{"name":"initial_I","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"user"},{"name":"initial_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"user"},{"name":"initial_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"user"},{"name":"interpolate_beta_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_eta_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_gamma_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_pop_change_t","location":"internal","storage_type":"interpolate_data","rank":1,"dimnames":{"length":"dim_pop_change_t","dim":[],"mult":[]},"stage":"user"},{"name":"interpolate_r_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_sigma_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_tau1_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_tau2_t","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"lambda","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_lambda","dim":[],"mult":[]},"stage":"time"},{"name":"lambda_prod","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_lambda_prod","dim":["dim_lambda_prod_1","dim_lambda_prod_2"],"mult":["","dim_lambda_prod_1"]},"stage":"time"},{"name":"n_age","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"n_rate_intervention","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"n_time","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_H","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"pop_change","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_pop_change","dim":["dim_pop_change_1","dim_pop_change_2"],"mult":["","dim_pop_change_1"]},"stage":"user"},{"name":"pop_change_t","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_pop_change_t","dim":[],"mult":[]},"stage":"time"},{"name":"r","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_r","dim":[],"mult":[]},"stage":"user"},{"name":"R","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"time"},{"name":"r_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"rate_intervention_effect","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_rate_intervention_effect","dim":["dim_rate_intervention_effect_1","dim_rate_intervention_effect_2"],"mult":["","dim_rate_intervention_effect_1"]},"stage":"user"},{"name":"rate_intervention_end","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_rate_intervention_end","dim":[],"mult":[]},"stage":"user"},{"name":"rate_intervention_start","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_rate_intervention_start","dim":[],"mult":[]},"stage":"user"},{"name":"rate_reduction","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_rate_reduction","dim":["dim_rate_reduction_1","dim_rate_reduction_2"],"mult":["","dim_rate_reduction_1"]},"stage":"time"},{"name":"rate_reduction_sum","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_rate_reduction_sum","dim":[],"mult":[]},"stage":"time"},{"name":"rate_reduction_total","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_rate_reduction_total","dim":[],"mult":[]},"stage":"time"},{"name":"S","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"time"},{"name":"sigma","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_sigma","dim":[],"mult":[]},"stage":"user"},{"name":"sigma_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"tau1","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_tau1","dim":[],"mult":[]},"stage":"user"},{"name":"tau1_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"tau2","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_tau2","dim":[],"mult":[]},"stage":"user"},{"name":"tau2_t","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"time","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_time","dim":[],"mult":[]},"stage":"user"}],"variable":{"length":["+",["+",["+",["+","dim_E","dim_H"],"dim_I"],"dim_R"],"dim_S"],"contents":[{"name":"S","offset":0,"initial":"initial_S"},{"name":"E","offset":"dim_S","initial":"initial_E"},{"name":"I","offset":"offset_variable_I","initial":"initial_I"},{"name":"H","offset":"offset_variable_H","initial":"initial_H"},{"name":"R","offset":"offset_variable_R","initial":"initial_R"}]},"output":{"length":0,"contents":[]}},"equations":[{"name":"alloc_initial_E","type":"alloc","source":[81],"depends":{"functions":[],"variables":["dim_E"]},"lhs":"initial_E"},{"name":"alloc_initial_H","type":"alloc","source":[83],"depends":{"functions":[],"variables":["dim_H"]},"lhs":"initial_H"},{"name":"alloc_initial_I","type":"alloc","source":[82],"depends":{"functions":[],"variables":["dim_I"]},"lhs":"initial_I"},{"name":"alloc_initial_R","type":"alloc","source":[84],"depends":{"functions":[],"variables":["dim_R"]},"lhs":"initial_R"},{"name":"alloc_initial_S","type":"alloc","source":[80],"depends":{"functions":[],"variables":["dim_S"]},"lhs":"initial_S"},{"name":"alloc_lambda","type":"alloc","source":[79],"depends":{"functions":[],"variables":["dim_lambda"]},"lhs":"lambda"},{"name":"alloc_lambda_prod","type":"alloc","source":[78],"depends":{"functions":[],"variables":["dim_lambda_prod"]},"lhs":"lambda_prod"},{"name":"alloc_pop_change_t","type":"alloc","source":[65],"depends":{"functions":[],"variables":["dim_pop_change_t"]},"lhs":"pop_change_t"},{"name":"alloc_rate_reduction","type":"alloc","source":[85],"depends":{"functions":[],"variables":["dim_rate_reduction"]},"lhs":"rate_reduction"},{"name":"alloc_rate_reduction_sum","type":"alloc","source":[86],"depends":{"functions":[],"variables":["dim_rate_reduction_sum"]},"lhs":"rate_reduction_sum"},{"name":"alloc_rate_reduction_total","type":"alloc","source":[87],"depends":{"functions":[],"variables":["dim_rate_reduction_total"]},"lhs":"rate_reduction_total"},{"name":"beta","type":"user","source":[46],"depends":{"functions":["length"],"variables":["dim_beta"]},"lhs":"beta","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"beta_t","type":"interpolate","source":[2],"depends":{"functions":[],"variables":["t","interpolate_beta_t"]},"lhs":"beta_t","interpolate":"interpolate_beta_t"},{"name":"deriv_E","type":"expression_array","source":[31],"depends":{"functions":["length","-","*","["],"variables":["dim_E","lambda","i","S","sigma_t","E"]},"lhs":"E","rhs":[{"index":[{"value":[":",1,["length","E"]],"is_range":true,"index":"i"}],"value":["-",["*",["[","lambda","i"],["[","S","i"]],["*","sigma_t",["[","E","i"]]]}]},{"name":"deriv_H","type":"expression_array","source":[33],"depends":{"functions":["length","-","*","["],"variables":["dim_H","tau1_t","eta_t","r_t","I","i","tau2_t","H"]},"lhs":"H","rhs":[{"index":[{"value":[":",1,["length","H"]],"is_range":true,"index":"i"}],"value":["-",["*",["*",["*","tau1_t","eta_t"],"r_t"],["[","I","i"]],["*","tau2_t",["[","H","i"]]]}]},{"name":"deriv_I","type":"expression_array","source":[32],"depends":{"functions":["length","-","*","["],"variables":["dim_I","sigma_t","E","i","eta_t","tau1_t","r_t","I","gamma_t"]},"lhs":"I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":["-",["-",["*","sigma_t",["[","E","i"]],["*",["*",["*","eta_t","tau1_t"],"r_t"],["[","I","i"]]],["*","gamma_t",["[","I","i"]]]}]},{"name":"deriv_R","type":"expression_array","source":[34],"depends":{"functions":["length","+","*","["],"variables":["dim_R","gamma_t","I","i","tau2_t","H"]},"lhs":"R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["+",["*","gamma_t",["[","I","i"]],["*","tau2_t",["[","H","i"]]]}]},{"name":"deriv_S","type":"expression_array","source":[30],"depends":{"functions":["length","+","*","-","["],"variables":["dim_S","lambda","i","S","pop_change_t"]},"lhs":"S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["+",["*",["-",["[","lambda","i"]],["[","S","i"]],["[","pop_change_t","i"]]}]},{"name":"dim_beta","type":"expression_scalar","source":[57],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_beta","rhs":{"value":"n_time"}},{"name":"dim_E","type":"expression_scalar","source":[81],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_E","rhs":{"value":"n_age"}},{"name":"dim_eta","type":"expression_scalar","source":[58],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_eta","rhs":{"value":"n_time"}},{"name":"dim_gamma","type":"expression_scalar","source":[61],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_gamma","rhs":{"value":"n_time"}},{"name":"dim_H","type":"expression_scalar","source":[83],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_H","rhs":{"value":"n_age"}},{"name":"dim_I","type":"expression_scalar","source":[82],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_I","rhs":{"value":"n_age"}},{"name":"dim_init_E","type":"expression_scalar","source":[92],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_init_E","rhs":{"value":"n_age"}},{"name":"dim_init_H","type":"expression_scalar","source":[94],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_init_H","rhs":{"value":"n_age"}},{"name":"dim_init_I","type":"expression_scalar","source":[93],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_init_I","rhs":{"value":"n_age"}},{"name":"dim_init_R","type":"expression_scalar","source":[95],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_init_R","rhs":{"value":"n_age"}},{"name":"dim_init_S","type":"expression_scalar","source":[91],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_init_S","rhs":{"value":"n_age"}},{"name":"dim_lambda","type":"expression_scalar","source":[79],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_lambda","rhs":{"value":"n_age"}},{"name":"dim_lambda_prod","type":"expression_scalar","source":[78],"depends":{"functions":[],"variables":["dim_lambda_prod_1","dim_lambda_prod_2"]},"lhs":"dim_lambda_prod","rhs":{"value":["*","dim_lambda_prod_1","dim_lambda_prod_2"]}},{"name":"dim_lambda_prod_1","type":"expression_scalar","source":[78],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_lambda_prod_1","rhs":{"value":"n_age"}},{"name":"dim_lambda_prod_2","type":"expression_scalar","source":[78],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_lambda_prod_2","rhs":{"value":"n_age"}},{"name":"dim_pop_change","type":"expression_scalar","source":[64],"depends":{"functions":[],"variables":["dim_pop_change_1","dim_pop_change_2"]},"lhs":"dim_pop_change","rhs":{"value":["*","dim_pop_change_1","dim_pop_change_2"]}},{"name":"dim_pop_change_1","type":"expression_scalar","source":[64],"depends":{"functions":[],"variables":["n_time","n_age"]},"lhs":"dim_pop_change_1","rhs":{"value":"n_time"}},{"name":"dim_pop_change_2","type":"expression_scalar","source":[64],"depends":{"functions":[],"variables":["n_time","n_age"]},"lhs":"dim_pop_change_2","rhs":{"value":"n_age"}},{"name":"dim_pop_change_t","type":"expression_scalar","source":[65],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_pop_change_t","rhs":{"value":"n_age"}},{"name":"dim_r","type":"expression_scalar","source":[59],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_r","rhs":{"value":"n_time"}},{"name":"dim_R","type":"expression_scalar","source":[84],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_R","rhs":{"value":"n_age"}},{"name":"dim_rate_intervention_effect","type":"expression_scalar","source":[90],"depends":{"functions":[],"variables":["dim_rate_intervention_effect_1","dim_rate_intervention_effect_2"]},"lhs":"dim_rate_intervention_effect","rhs":{"value":["*","dim_rate_intervention_effect_1","dim_rate_intervention_effect_2"]}},{"name":"dim_rate_intervention_effect_1","type":"expression_scalar","source":[90],"depends":{"functions":[],"variables":["n_rate_intervention","n_age"]},"lhs":"dim_rate_intervention_effect_1","rhs":{"value":"n_rate_intervention"}},{"name":"dim_rate_intervention_effect_2","type":"expression_scalar","source":[90],"depends":{"functions":[],"variables":["n_rate_intervention","n_age"]},"lhs":"dim_rate_intervention_effect_2","rhs":{"value":"n_age"}},{"name":"dim_rate_intervention_end","type":"expression_scalar","source":[89],"depends":{"functions":[],"variables":["n_rate_intervention"]},"lhs":"dim_rate_intervention_end","rhs":{"value":"n_rate_intervention"}},{"name":"dim_rate_intervention_start","type":"expression_scalar","source":[88],"depends":{"functions":[],"variables":["n_rate_intervention"]},"lhs":"dim_rate_intervention_start","rhs":{"value":"n_rate_intervention"}},{"name":"dim_rate_reduction","type":"expression_scalar","source":[85],"depends":{"functions":[],"variables":["dim_rate_reduction_1","dim_rate_reduction_2"]},"lhs":"dim_rate_reduction","rhs":{"value":["*","dim_rate_reduction_1","dim_rate_reduction_2"]}},{"name":"dim_rate_reduction_1","type":"expression_scalar","source":[85],"depends":{"functions":[],"variables":["n_rate_intervention","n_age"]},"lhs":"dim_rate_reduction_1","rhs":{"value":"n_rate_intervention"}},{"name":"dim_rate_reduction_2","type":"expression_scalar","source":[85],"depends":{"functions":[],"variables":["n_rate_intervention","n_age"]},"lhs":"dim_rate_reduction_2","rhs":{"value":"n_age"}},{"name":"dim_rate_reduction_sum","type":"expression_scalar","source":[86],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_rate_reduction_sum","rhs":{"value":"n_age"}},{"name":"dim_rate_reduction_total","type":"expression_scalar","source":[87],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_rate_reduction_total","rhs":{"value":"n_age"}},{"name":"dim_S","type":"expression_scalar","source":[80],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_S","rhs":{"value":"n_age"}},{"name":"dim_sigma","type":"expression_scalar","source":[60],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_sigma","rhs":{"value":"n_time"}},{"name":"dim_tau1","type":"expression_scalar","source":[62],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_tau1","rhs":{"value":"n_time"}},{"name":"dim_tau2","type":"expression_scalar","source":[63],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_tau2","rhs":{"value":"n_time"}},{"name":"dim_time","type":"expression_scalar","source":[56],"depends":{"functions":[],"variables":["n_time"]},"lhs":"dim_time","rhs":{"value":"n_time"}},{"name":"eta","type":"user","source":[47],"depends":{"functions":["length"],"variables":["dim_eta"]},"lhs":"eta","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"eta_t","type":"interpolate","source":[4],"depends":{"functions":[],"variables":["t","interpolate_eta_t"]},"lhs":"eta_t","interpolate":"interpolate_eta_t"},{"name":"gamma","type":"user","source":[50],"depends":{"functions":["length"],"variables":["dim_gamma"]},"lhs":"gamma","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"gamma_t","type":"interpolate","source":[8],"depends":{"functions":[],"variables":["t","interpolate_gamma_t"]},"lhs":"gamma_t","interpolate":"interpolate_gamma_t"},{"name":"init_E","type":"user","source":[72],"depends":{"functions":["length"],"variables":["dim_init_E"]},"lhs":"init_E","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"init_H","type":"user","source":[74],"depends":{"functions":["length"],"variables":["dim_init_H"]},"lhs":"init_H","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"init_I","type":"user","source":[73],"depends":{"functions":["length"],"variables":["dim_init_I"]},"lhs":"init_I","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"init_R","type":"user","source":[75],"depends":{"functions":["length"],"variables":["dim_init_R"]},"lhs":"init_R","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"init_S","type":"user","source":[71],"depends":{"functions":["length"],"variables":["dim_init_S"]},"lhs":"init_S","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"initial_E","type":"expression_array","source":[38],"depends":{"functions":["length","["],"variables":["dim_E","init_E","i"]},"lhs":"initial_E","rhs":[{"index":[{"value":[":",1,["length","E"]],"is_range":true,"index":"i"}],"value":["[","init_E","i"]}]},{"name":"initial_H","type":"expression_array","source":[40],"depends":{"functions":["length","["],"variables":["dim_H","init_H","i"]},"lhs":"initial_H","rhs":[{"index":[{"value":[":",1,["length","H"]],"is_range":true,"index":"i"}],"value":["[","init_H","i"]}]},{"name":"initial_I","type":"expression_array","source":[39],"depends":{"functions":["length","["],"variables":["dim_I","init_I","i"]},"lhs":"initial_I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":["[","init_I","i"]}]},{"name":"initial_R","type":"expression_array","source":[41],"depends":{"functions":["length","["],"variables":["dim_R","init_R","i"]},"lhs":"initial_R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["[","init_R","i"]}]},{"name":"initial_S","type":"expression_array","source":[37],"depends":{"functions":["length","["],"variables":["dim_S","init_S","i"]},"lhs":"initial_S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["[","init_S","i"]}]},{"name":"interpolate_beta_t","type":"alloc_interpolate","source":[2],"depends":{"functions":[],"variables":["time","beta"]},"lhs":"interpolate_beta_t","interpolate":{"t":"time","y":"beta","type":"linear","equation":"beta_t"}},{"name":"interpolate_eta_t","type":"alloc_interpolate","source":[4],"depends":{"functions":[],"variables":["time","eta"]},"lhs":"interpolate_eta_t","interpolate":{"t":"time","y":"eta","type":"linear","equation":"eta_t"}},{"name":"interpolate_gamma_t","type":"alloc_interpolate","source":[8],"depends":{"functions":[],"variables":["time","gamma"]},"lhs":"interpolate_gamma_t","interpolate":{"t":"time","y":"gamma","type":"linear","equation":"gamma_t"}},{"name":"interpolate_pop_change_t","type":"alloc_interpolate","source":[9],"depends":{"functions":["length"],"variables":["dim_pop_change_t","time","pop_change","alloc_pop_change_t"]},"lhs":"interpolate_pop_change_t","interpolate":{"t":"time","y":"pop_change","type":"linear","equation":"pop_change_t"}},{"name":"interpolate_r_t","type":"alloc_interpolate","source":[3],"depends":{"functions":[],"variables":["time","r"]},"lhs":"interpolate_r_t","interpolate":{"t":"time","y":"r","type":"linear","equation":"r_t"}},{"name":"interpolate_sigma_t","type":"alloc_interpolate","source":[5],"depends":{"functions":[],"variables":["time","sigma"]},"lhs":"interpolate_sigma_t","interpolate":{"t":"time","y":"sigma","type":"linear","equation":"sigma_t"}},{"name":"interpolate_tau1_t","type":"alloc_interpolate","source":[6],"depends":{"functions":[],"variables":["time","tau1"]},"lhs":"interpolate_tau1_t","interpolate":{"t":"time","y":"tau1","type":"linear","equation":"tau1_t"}},{"name":"interpolate_tau2_t","type":"alloc_interpolate","source":[7],"depends":{"functions":[],"variables":["time","tau2"]},"lhs":"interpolate_tau2_t","interpolate":{"t":"time","y":"tau2","type":"linear","equation":"tau2_t"}},{"name":"lambda","type":"expression_array","source":[27],"depends":{"functions":["length","odin_sum","dim"],"variables":["dim_lambda","lambda_prod","i","dim_lambda_prod","alloc_lambda"]},"lhs":"lambda","rhs":[{"index":[{"value":[":",1,["length","lambda"]],"is_range":true,"index":"i"}],"value":["odin_sum","lambda_prod","i","i",1,["dim","lambda_prod",2]]}]},{"name":"lambda_prod","type":"expression_array","source":[26],"depends":{"functions":["dim","/","*","[","(","+","odin_sum","length"],"variables":["dim_lambda_prod","beta_t","I","j","rate_reduction_total","i","S","dim_S","E","dim_E","dim_I","H","dim_H","R","dim_R","alloc_lambda_prod"]},"lhs":"lambda_prod","rhs":[{"index":[{"value":[":",1,["dim","lambda_prod",1]],"is_range":true,"index":"i"},{"value":[":",1,["dim","lambda_prod",2]],"is_range":true,"index":"j"}],"value":["/",["*",["*","beta_t",["[","I","j"]],["[","rate_reduction_total","i"]],["(",["+",["+",["+",["+",["odin_sum","S",1,["length","S"]],["odin_sum","E",1,["length","E"]]],["odin_sum","I",1,["length","I"]]],["odin_sum","H",1,["length","H"]]],["odin_sum","R",1,["length","R"]]]]]}]},{"name":"n_age","type":"user","source":[44],"depends":null,"lhs":"n_age","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"n_rate_intervention","type":"user","source":[45],"depends":null,"lhs":"n_rate_intervention","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"n_time","type":"user","source":[66],"depends":null,"lhs":"n_time","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"offset_variable_H","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_E","dim_I","dim_S"]},"lhs":"offset_variable_H","rhs":{"value":["+",["+","dim_E","dim_I"],"dim_S"]}},{"name":"offset_variable_I","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_E","dim_S"]},"lhs":"offset_variable_I","rhs":{"value":["+","dim_E","dim_S"]}},{"name":"offset_variable_R","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_E","dim_H","dim_I","dim_S"]},"lhs":"offset_variable_R","rhs":{"value":["+",["+",["+","dim_E","dim_H"],"dim_I"],"dim_S"]}},{"name":"pop_change","type":"user","source":[53],"depends":{"functions":["dim"],"variables":["dim_pop_change"]},"lhs":"pop_change","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"pop_change_t","type":"interpolate","source":[9],"depends":{"functions":[],"variables":["t","interpolate_pop_change_t"]},"lhs":"pop_change_t","interpolate":"interpolate_pop_change_t"},{"name":"r","type":"user","source":[48],"depends":{"functions":["length"],"variables":["dim_r"]},"lhs":"r","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"r_t","type":"interpolate","source":[3],"depends":{"functions":[],"variables":["t","interpolate_r_t"]},"lhs":"r_t","interpolate":"interpolate_r_t"},{"name":"rate_intervention_effect","type":"user","source":[70],"depends":{"functions":["dim"],"variables":["dim_rate_intervention_effect"]},"lhs":"rate_intervention_effect","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rate_intervention_end","type":"user","source":[69],"depends":{"functions":["length"],"variables":["dim_rate_intervention_end"]},"lhs":"rate_intervention_end","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rate_intervention_start","type":"user","source":[68],"depends":{"functions":["length"],"variables":["dim_rate_intervention_start"]},"lhs":"rate_intervention_start","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rate_reduction","type":"expression_array","source":[15,16],"depends":{"functions":["dim","if","&&",">","[","<"],"variables":["dim_rate_reduction","t","rate_intervention_start","i","rate_intervention_end","rate_intervention_effect","j","alloc_rate_reduction"]},"lhs":"rate_reduction","rhs":[{"index":[{"value":[":",1,["dim","rate_reduction",1]],"is_range":true,"index":"i"},{"value":[":",1,["dim","rate_reduction",2]],"is_range":true,"index":"j"}],"value":["if",["&&",[">","t",["[","rate_intervention_start","i"]],["<","t",["[","rate_intervention_end","i"]]],["[","rate_intervention_effect","i","j"],0]}]},{"name":"rate_reduction_sum","type":"expression_array","source":[17],"depends":{"functions":["length","odin_sum","dim"],"variables":["dim_rate_reduction_sum","rate_reduction","dim_rate_reduction","i","alloc_rate_reduction_sum"]},"lhs":"rate_reduction_sum","rhs":[{"index":[{"value":[":",1,["length","rate_reduction_sum"]],"is_range":true,"index":"i"}],"value":["odin_sum","rate_reduction",1,["dim","rate_reduction",1],"i","i"]}]},{"name":"rate_reduction_total","type":"expression_array","source":[18],"depends":{"functions":["length","-","min","["],"variables":["dim_rate_reduction_total","rate_reduction_sum","i","alloc_rate_reduction_total"]},"lhs":"rate_reduction_total","rhs":[{"index":[{"value":[":",1,["length","rate_reduction_total"]],"is_range":true,"index":"i"}],"value":["-",1,["min",["[","rate_reduction_sum","i"],1]]}]},{"name":"sigma","type":"user","source":[49],"depends":{"functions":["length"],"variables":["dim_sigma"]},"lhs":"sigma","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"sigma_t","type":"interpolate","source":[5],"depends":{"functions":[],"variables":["t","interpolate_sigma_t"]},"lhs":"sigma_t","interpolate":"interpolate_sigma_t"},{"name":"tau1","type":"user","source":[51],"depends":{"functions":["length"],"variables":["dim_tau1"]},"lhs":"tau1","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"tau1_t","type":"interpolate","source":[6],"depends":{"functions":[],"variables":["t","interpolate_tau1_t"]},"lhs":"tau1_t","interpolate":"interpolate_tau1_t"},{"name":"tau2","type":"user","source":[52],"depends":{"functions":["length"],"variables":["dim_tau2"]},"lhs":"tau2","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"tau2_t","type":"interpolate","source":[7],"depends":{"functions":[],"variables":["t","interpolate_tau2_t"]},"lhs":"tau2_t","interpolate":"interpolate_tau2_t"},{"name":"time","type":"user","source":[67],"depends":{"functions":["length"],"variables":["dim_time"]},"lhs":"time","user":{"default":null,"dim":false,"min":null,"max":null}}],"debug":[],"components":{"create":{"variables":[],"equations":[]},"user":{"variables":[],"equations":["n_age","n_rate_intervention","n_time","dim_beta","dim_E","dim_eta","dim_gamma","dim_H","dim_I","dim_init_E","dim_init_H","dim_init_I","dim_init_R","dim_init_S","dim_lambda","dim_lambda_prod_1","dim_lambda_prod_2","dim_pop_change_1","dim_pop_change_2","dim_pop_change_t","dim_r","dim_R","dim_rate_intervention_effect_1","dim_rate_intervention_effect_2","dim_rate_intervention_end","dim_rate_intervention_start","dim_rate_reduction_1","dim_rate_reduction_2","dim_rate_reduction_sum","dim_rate_reduction_total","dim_S","dim_sigma","dim_tau1","dim_tau2","dim_time","alloc_initial_E","alloc_initial_H","alloc_initial_I","alloc_initial_R","alloc_initial_S","alloc_lambda","alloc_pop_change_t","alloc_rate_reduction_sum","alloc_rate_reduction_total","beta","dim_lambda_prod","dim_pop_change","dim_rate_intervention_effect","dim_rate_reduction","eta","gamma","init_E","init_H","init_I","init_R","init_S","offset_variable_H","offset_variable_I","offset_variable_R","r","rate_intervention_end","rate_intervention_start","sigma","tau1","tau2","time","alloc_lambda_prod","alloc_rate_reduction","initial_E","initial_H","initial_I","initial_R","initial_S","interpolate_beta_t","interpolate_eta_t","interpolate_gamma_t","interpolate_r_t","interpolate_sigma_t","interpolate_tau1_t","interpolate_tau2_t","pop_change","rate_intervention_effect","interpolate_pop_change_t"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["S","E","I","H","R"],"equations":["beta_t","eta_t","gamma_t","r_t","rate_reduction","sigma_t","tau1_t","tau2_t","deriv_H","deriv_I","deriv_R","pop_change_t","rate_reduction_sum","rate_reduction_total","lambda_prod","lambda","deriv_E","deriv_S"]},"update_stochastic":{"variables":[],"equations":[]},"output":{"variables":[],"equations":[]},"compare":{"variables":[],"equations":[]}},"user":[{"name":"beta","has_default":false},{"name":"eta","has_default":false},{"name":"gamma","has_default":false},{"name":"init_E","has_default":false},{"name":"init_H","has_default":false},{"name":"init_I","has_default":false},{"name":"init_R","has_default":false},{"name":"init_S","has_default":false},{"name":"n_age","has_default":false},{"name":"n_rate_intervention","has_default":false},{"name":"n_time","has_default":false},{"name":"pop_change","has_default":false},{"name":"r","has_default":false},{"name":"rate_intervention_effect","has_default":false},{"name":"rate_intervention_end","has_default":false},{"name":"rate_intervention_start","has_default":false},{"name":"sigma","has_default":false},{"name":"tau1","has_default":false},{"name":"tau2","has_default":false},{"name":"time","has_default":false}],"interpolate":{"min":["time"],"max":["time"],"critical":[]},"source":["# Time-dependent parameters","beta_t <- interpolate(time, beta, \"linear\")","r_t <- interpolate(time, r, \"linear\") # report","eta_t <- interpolate(time, eta, \"linear\") # hospitalisation","sigma_t <- interpolate(time, sigma, \"linear\")","tau1_t <- interpolate(time, tau1, \"linear\") # hospital entry","tau2_t <- interpolate(time, tau2, \"linear\") # hospital exit","gamma_t <- interpolate(time, gamma, \"linear\")","pop_change_t[] <- interpolate(time, pop_change, \"linear\")","","## Compute reduction in transmission from rate_intervention","# Contact matrix with time-dependent interventions","# Then add across interventions - rate does not seem to be age-dependent, ","# so could remove age dimension for rate_reduction and rate_reduction_total","rate_reduction[,] <- if (t > rate_intervention_start[i] && t < rate_intervention_end[i]) ","  rate_intervention_effect[i,j] else 0 # nolint: line_length_linter.","rate_reduction_sum[] <- sum(rate_reduction[,i])","rate_reduction_total[] <- 1 - min(rate_reduction_sum[i], 1)","","# Specify how transmission varies over time","# FOI is contacts * infectious * transmission rate ","# returns a matrix, must be converted to a vector/1D array","# multiply FOI by  reduction in contact origin * reduction in contact destination * reduction in rate","# NOTE: division by population size - this is typically included in the","# contact matrix scaling in other models","lambda_prod[, ] <- beta_t * I[j] * rate_reduction_total[i] / (sum(S[]) + sum(E[]) + sum(I[]) + sum(H[]) + sum(R[]))","lambda[] <- sum(lambda_prod[i, ])","","# ODEs","deriv(S[]) <-  -lambda[i] * S[i] + pop_change_t[i]","deriv(E[]) <-  lambda[i] * S[i] - sigma_t * E[i]","deriv(I[]) <-  sigma_t * E[i] - eta_t * tau1_t * r_t * I[i] - gamma_t * I[i]","deriv(H[]) <-  tau1_t * eta_t * r_t * I[i] - tau2_t * H[i]","deriv(R[]) <-  gamma_t * I[i] + tau2_t * H[i]","","# Initial conditions","initial(S[]) <- init_S[i]","initial(E[]) <- init_E[i]","initial(I[]) <- init_I[i]","initial(H[]) <- init_H[i]","initial(R[]) <- init_R[i]","","# User-defined parameters","n_age <- user()","n_rate_intervention <- user()","beta[] <- user()","eta[] <- user()","r[] <- user()","sigma[] <- user()","gamma[] <- user()","tau1[] <- user()","tau2[] <- user()","pop_change[,] <- user()","","# Not currently used (can re-add for time-dependent parameters)","dim(time) <- n_time","dim(beta) <- n_time","dim(eta) <- n_time","dim(r) <- n_time","dim(sigma) <- n_time","dim(gamma) <- n_time","dim(tau1) <- n_time","dim(tau2) <- n_time","dim(pop_change) <- c(n_time, n_age)","dim(pop_change_t) <- n_age","n_time <- user()","time[] <- user()","rate_intervention_start[] <- user()","rate_intervention_end[] <- user()","rate_intervention_effect[, ] <- user()","init_S[] <- user()","init_E[] <- user()","init_I[] <- user()","init_H[] <- user()","init_R[] <- user()","","# Dimensions","dim(lambda_prod) <- c(n_age, n_age)","dim(lambda) <- n_age","dim(S) <- n_age","dim(E) <- n_age","dim(I) <- n_age","dim(H) <- n_age","dim(R) <- n_age","dim(rate_reduction) <- c(n_rate_intervention, n_age)","dim(rate_reduction_sum) <- c(n_age)","dim(rate_reduction_total) <- c(n_age)","dim(rate_intervention_start) <- n_rate_intervention","dim(rate_intervention_end) <- n_rate_intervention","dim(rate_intervention_effect) <- c(n_rate_intervention, n_age)","dim(init_S) <- n_age","dim(init_E) <- n_age","dim(init_I) <- n_age","dim(init_H) <- n_age","dim(init_R) <- n_age",""]}
